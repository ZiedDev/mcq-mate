(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[6],{164:function(e,t,r){function n(e,t,r,n){return Object(y.b)(void 0,void 0,void 0,(function(){var a,o,l,c,s,u,g,m,d;return Object(y.d)(this,(function(p){switch(p.label){case 0:return a=h.getDocument(),o=[1],[4,Object(T.c)(t,{extension:"pdf"})];case 1:return l=p.ea(),c=h.ta(),g=(u=A.a).tga,[4,l.SB()];case 2:return s=g.apply(u,[p.ea().xfdfString,e]),m=!0,[4,a.Hf(l,o,e,m)];case 3:return p.ea(),[4,a.yg([e+1],m)];case 4:return p.ea(),d=c.Pb().filter((function(t){return t.hK()&&t.PageNumber===e})),c.Wj(d,{force:!0,source:"contentEditTool"}),[4,c.QJ(s)];case 5:return p.ea(),h.getDocument().BL(),h.AL(e),h.Ye(),i(e),f(e,r.galleys,n),f(e,r.objects,n),[2]}}))}))}function a(e){return(e=(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body")).querySelectorAll("p").forEach((function(e){e.querySelectorAll("span").forEach((function(e){var t=e.getAttribute("style");t=o(t,e.innerHTML),e.innerHTML=t}));var t=e.getAttribute("style"),r=e.innerHTML.pj("<br>","");e.innerHTML=o(t,r)})),e.innerHTML.trim()}function o(e,t){return e.includes("bold")&&(t="<strong>"+t+"</strong>"),e.includes("italic")&&(t="<em>"+t+"</em>"),e.includes("text-decoration: underline")&&(t="<u>"+t+"</u>"),t}function i(e){var t=h.ta(),r=t.Pb().filter((function(t){return t.Sh()&&t.PageNumber===e}));t.Wj(r,{force:!0,source:"contentEditTool"})}function l(e,t){t.forEach((function(t){S[e]||(S[e]=[]),S[e].find((function(e){return e.id===t.id}))||S[e].push(t)}))}function c(e,t){t.forEach((function(t){j[e]||(j[e]=[]),j[e].find((function(e){return e.id===t.id}))||j[e].push(t)}))}function s(e,t,r,n){this.top=e,this.left=t,this.bottom=r,this.right=n,this.topVal=function(){return Math.round(this.top)},this.bottomVal=function(){return Math.round(this.bottom)},this.leftVal=function(){return Math.round(this.left)},this.rightVal=function(){return Math.round(this.right)},this.height=function(){return Math.round(Math.abs(this.top-this.bottom))},this.width=function(){return Math.round(this.right-this.left)},this.YQ=function(e){return this.topVal()!==e.topVal()||this.leftVal()!==e.leftVal()||this.bottomVal()!==e.bottomVal()||this.rightVal()!==e.rightVal()}}function u(e,t,r,n,a){this.id=e,this.pagenum=t,this.galleysContents=r,this.contents=n,this.galleyBox=a,Object(B.g)(j)}function g(e,t,r,n){this.id=t,this.type=e,this.bbox=r,this.pagenum=n}function m(e,t,r,n,a){this.id=e,this.pagecount=t,this.pageBBox=r,this.galleys=n,this.objects=a}function f(e,t,r){var n=[],a=h.getDocument(),o=null;t.forEach((function(t){if(t instanceof g){var i=a.co(e,t.bbox.leftVal(),t.bbox.topVal()),l=i.x,c=i.y,s=a.co(e,t.bbox.rightVal(),t.bbox.bottomVal());i=s.x,s=s.y}else{if(!(t instanceof u))return;l=(i=a.co(e,t.galleyBox.leftVal(),t.galleyBox.topVal())).x,c=i.y,i=(s=a.co(e,t.galleyBox.rightVal(),t.galleyBox.bottomVal())).x,s=s.y}var m=new window.Core.Annotations.RectangleAnnotation,f=M.a.OBJECT;t instanceof u&&(f=M.a.TEXT),m.Zia(t,f),m.PageNumber=t.pagenum,m.X=l,m.Y=c,m.Width=i-l,m.Height=s-c,m.StrokeColor=new v.a("#3183C8"),m.FillColor=new v.a(255,255,255,.01),m.Style="dash",m.Dashes="4,3",m.DB(),m.selectionModel=N.a,n.push(m),void 0!==r&&r===t.id&&(o=m)})),(t=h.ta()).Ci(n),o&&t.Cg(o),t.kf(n)}function d(e,t){return e=parseFloat(e),isNaN(t)||t<e?e:t}function p(e,t,r,n){var a,o=new DOMParser;n=o.parseFromString(n,"text/xml"),Array.prototype.slice.call(n.getElementsByTagName("BBox")).forEach((function(e){if("CropBox"===e.getAttribute("Name")){var t=parseFloat(e.getElementsByTagName("Top").item(0).innerHTML),r=parseFloat(e.getElementsByTagName("Bottom").item(0).innerHTML),n=parseFloat(e.getElementsByTagName("Left").item(0).innerHTML);e=parseFloat(e.getElementsByTagName("Right").item(0).innerHTML),a=new s(t,n,r,e)}})),n=(o=new DOMParser).parseFromString(t,"text/xml");var i=[];Array.prototype.slice.call(n.getElementsByTagName("STORY")).forEach((function(t){var r=t.getAttribute("galley_ids"),n=Array.prototype.slice.call(t.getElementsByTagName("g"))[0],a=n.getAttribute("bbox").split(" ");a=new s(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])),n=n.innerHTML;var o=Array.prototype.slice.call(t.getElementsByTagName("galleys"))[0];o.parentNode.removeChild(o),t=t.innerHTML,t=(new DOMParser).parseFromString(t,"text/html").documentElement.querySelector("body").innerHTML.trim(),r=new u(r,e,n,t,a),i.push(r)})),o=new DOMParser;var l=[];return t=o.parseFromString(r,"text/xml").getElementsByTagName("Object"),Array.prototype.slice.call(t).forEach((function(t){var r=t.getAttribute("Type"),n=t.getAttribute("OID");t=Array.prototype.slice.call(t.getElementsByTagName("Point"));var a=Number.NaN,o=Number.NaN,i=Number.NaN,c=Number.NaN;t.forEach((function(e){var t=e.getAttribute("Name");"TL"===t?(a=d(e.getAttribute("Y"),a),i=d(e.getAttribute("X"),i)):"TR"===t?(a=d(e.getAttribute("Y"),a),c=d(e.getAttribute("X"),c)):"BR"===t?(o=d(e.getAttribute("Y"),o),c=d(e.getAttribute("X"),c)):"BL"===t&&(o=d(e.getAttribute("Y"),o),i=d(e.getAttribute("X"),i))})),l.push(new g(r,n,new s(a,i,o,c),e))})),new m(t=Array.prototype.slice.call(n.getElementsByTagName("DOC"))[0].getAttribute("id"),1,a,i,l)}function b(e,t){var r;t=new TextDecoder("utf-8").decode(t);var n=(new DOMParser).parseFromString(t,"text/xml");if(null!=(t=n.getElementsByTagName("Galley").item(0))){var a=t.getAttribute("id");t=n.getElementsByTagName("BBox"),(t=Array.prototype.slice.call(t)).forEach((function(e){var t=e.getElementsByTagName("Top"),n=parseFloat(t.item(0).innerHTML);t=e.getElementsByTagName("Left");var a=parseFloat(t.item(0).innerHTML);t=e.getElementsByTagName("Bottom");var o=parseFloat(t.item(0).innerHTML);t=e.getElementsByTagName("Right"),e=parseFloat(t.item(0).innerHTML),r=new s(n,a,o,e)})),j[e].forEach((function(e){e.id===a&&!0===r.YQ(e.galleyBox)&&(e.galleyBox=r)}))}if(null!=(t=n.getElementsByTagName("Object").item(0))){var o=t.getAttribute("OID");t=n.getElementsByTagName("BBox"),(t=Array.prototype.slice.call(t)).forEach((function(e){var t=e.getElementsByTagName("Top"),n=parseFloat(t.item(0).innerHTML);t=e.getElementsByTagName("Left");var a=parseFloat(t.item(0).innerHTML);t=e.getElementsByTagName("Bottom");var o=parseFloat(t.item(0).innerHTML);t=e.getElementsByTagName("Right"),e=parseFloat(t.item(0).innerHTML),r=new s(n,a,o,e)})),S[e].forEach((function(e){e.id===o&&!0===r.YQ(e.bbox)&&(e.bbox=r)}))}if(null!=(t=n.getElementsByTagName("NewParas").item(0))){var i=t.getAttribute("id");j[e].forEach((function(e){if(e.id===i){var t="<Contents>"+e.contents;t+="</Contents>";var r=Array.prototype.slice.call(n.getElementsByTagName("NewPara"));t=(new DOMParser).parseFromString(t,"text/xml");var a=Array.prototype.slice.call(t.getElementsByTagName("p"));r.forEach((function(e){var t=parseFloat(e.innerHTML),r=!1;a.forEach((function(e){var n=e.getAttribute("id");!1===r&&"0"===n&&(e.setAttribute("id",t),r=!0)}))})),e.contents=t.getElementsByTagName("Contents").item(0).innerHTML}}))}}r.r(t);var h,y=r(1),T=r(55),v=r(8),N=r(475),x=r(37),E=r(76),w=r(2),M=r(174),B=r(118),A=r(6),O=null,L=null,j={},S={},F={};t.default={qga:function(e){return Object(y.b)(void 0,void 0,void 0,(function(){return Object(y.d)(this,(function(){return L||(h=e,L=new Promise((function(e,t){(O=new Worker(window.Core.getWorkerPath()+"contentEdit/InfixServerModule.js")).onmessage=function(r){!function(e,t,r){Object(y.b)(this,void 0,void 0,(function(){var a,o,s;return Object(y.d)(this,(function(u){switch(u.label){case 0:switch((a=e.data).cmd){case"isReady":return[3,1];case"initialiseInfixServer":return[3,3];case"exportFile":return[3,4];case"importText":case"transformObject":return[3,5];case"deleteObject":return[3,6]}return[3,7];case 1:return[4,Object(E.b)()];case 2:return s=u.ea(),O.postMessage({cmd:"initialiseInfixServer",l:s}),[3,7];case 3:return function(e){e=new Uint8Array(e);var t=new TextDecoder("utf-8").decode(e);return e=!1,null!==(t=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("LicenseCheck"))&&0<t.length&&"error"!==(t=t[0].getElementsByTagName("Status")[0].innerHTML)&&"ok"===t&&(e=!0),e}(a.resultsXML)?t():r("License key does not have content edit permission"),[3,7];case 4:return a.exportPerformed?function(e,t,r,n){var a=new Uint8Array(t),o=new TextDecoder("utf-8");t=o.decode(a),a=new Uint8Array(r),r=o.decode(a),a=new Uint8Array(n),n=o.decode(a),F[e]=p(e,t,r,n),c(e,(n=F[e]).galleys),l(e,n.objects),i(e),f(e,n.galleys),f(e,n.objects)}(a.pageNumber,a.exportXML,a.objectXML,a.resultsXML):(o=F[a.pageNumber],c(a.pageNumber,o.galleys),l(a.pageNumber,o.objects),i(a.pageNumber),f(a.pageNumber,o.galleys),f(a.pageNumber,o.objects)),[3,7];case 5:return o=F[a.pageNumber],b(a.pageNumber,a.resultsXML),n(a.pageNumber,a.pdfBuffer,o,a.id),[3,7];case 6:return o=F[a.pageNumber],b(a.pageNumber,a.resultsXML),o.galleys=o.galleys.filter((function(e){return e.id!==a.id})),o.objects=o.objects.filter((function(e){return e.id!==a.id})),n(a.pageNumber,a.pdfBuffer,o),[3,7];case 7:return[2]}}))}))}(r,e,t)},O.postMessage({cmd:"isReady"})}))),[2,L]}))}))},sga:function(e,t,r){return Object(y.b)(void 0,void 0,void 0,(function(){var n,a,o,l;return Object(y.d)(this,(function(c){switch(c.label){case 0:return i(t),j[t]=[],S[t]=[],[4,e.Ie([t])];case 1:return n=c.ea(),a=new TextEncoder,o=a.encode(""),l=o.buffer,O.postMessage({cmd:"exportFile",pageNumber:t,performExport:r,pdfFile:n,tableData:l},[n,l]),[2]}}))}))},k7:function(e){return Object(y.b)(void 0,void 0,void 0,(function(){var t,r,n,a,o,i,l;return Object(y.d)(this,(function(c){switch(c.label){case 0:return t=e.id,r=e.isText,n=e.pageNumber,[4,h.getDocument().Ie([n])];case 1:return a=c.ea(),o=new TextEncoder,i=o.encode(""),l=i.buffer,O.postMessage({cmd:"deleteObject",pdfFile:a,pageNumber:n,objectID:t,isText:r,tableData:l},[l]),[2]}}))}))},Bla:function(e){return Object(y.b)(void 0,void 0,void 0,(function(){var t,r,n,a,o,i,l,c,s,u,g,m;return Object(y.d)(this,(function(f){switch(f.label){case 0:return t=e.id,r=e.position,n=r.top,a=r.left,o=r.bottom,i=r.right,l=e.isText,c=e.pageNumber,[4,h.getDocument().Ie([c])];case 1:return s=f.ea(),u=new TextEncoder,g=u.encode(""),m=g.buffer,O.postMessage({cmd:"transformObject",pdfFile:s,pageNumber:c,objectID:t,isText:l,topVal:n,leftVal:a,bottomVal:o,rightVal:i,tableData:m},[m]),[2]}}))}))},Tla:function(e,t){return Object(y.b)(void 0,void 0,void 0,(function(){var r,n,o,i,l,c,s,u,g,m,f,d,p,b,T,v,N;return Object(y.d)(this,(function(y){switch(y.label){case 0:return r=t.pj("<p><br></p>",""),n=function(e){var t=new DOMParser,r=t.parseFromString(e,"text/xml");return r.querySelector("parsererror")&&(r=t.parseFromString("<Root>"+e+"</Root>","text/xml")),r.querySelectorAll("a").forEach((function(e){var t=e.childNodes[0];Array.from(e.querySelectorAll("*")).find((function(e){return"u"===e.tagName.toLowerCase()}))||(e=document.createElement("u"),t.after(e),e.appendChild(t))})),(new XMLSerializer).serializeToString(r)}(r),n=n.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1"),o=e.Ru.id,i=e.PageNumber,l=F[i],c=l.galleys.find((function(e){return e.id===o})),s=a(c.contents),u=function(e,t,r,n,a){var o=[];(new DOMParser).parseFromString(n,"text/html").documentElement.querySelectorAll("p").forEach((function(e,t){o[t]=e.innerHTML})),r=(new DOMParser).parseFromString(r,"text/html");var i=null;for(r.documentElement.querySelectorAll("p").forEach((function(e,t){t<o.length?(e.innerHTML=o[t],i=(i=(i=(i=e.getAttribute("style")).replace("font:italic","font:normal")).replace(" bold "," normal ")).replace("underline:1;","underline:0;"),e.setAttribute("style",i)):e.remove()})),n=r.documentElement.querySelectorAll("p").length;n<o.length;n++){var l=document.createElement("p");l.setAttribute("id","0"),l.innerHTML=o[n],null!=i&&l.setAttribute("style",i),r.documentElement.querySelector("body").appendChild(l)}r=r.documentElement.querySelector("body").innerHTML;var c="";return j[e].forEach((function(e){e.id===a&&(c=e)})),""===c?"":(t=(t="<DOC id='"+t.id+"' pagecount='"+t.pagecount+"'>")+"<STORY galley_ids='"+a+"' pagenum='"+e+"'><galleys>"+c.galleysContents+"</galleys>",c.contents=r,(t=t+r+"\n</STORY>")+"</DOC>")}(i,l,s,n,o),""===u?[3,2]:(g=new TextEncoder,m=g.encode(u),f=m.buffer,d=Object(x.c)()||"https://www.pdftron.com/webfonts/v2/",[4,h.getDocument().Ie([i])]);case 1:return p=y.ea(),g=new TextEncoder,b=g.encode(""),T=b.buffer,O.postMessage({cmd:"importText",pdfFile:p,pageNumber:i,webFontURL:d,galleyId:o,importData:f,tableData:T},[f,T]),v={},c&&(N=c.galleyBox,v={top:N.top,left:N.left,bottom:N.bottom,right:N.right}),Object(B.h)(s,n,v),[3,3];case 2:Object(w.g)("Unable to generate import XML"),y.label=3;case 3:return[2]}}))}))},Daa:function(e){if(e)return a(e.contents);Object(w.g)("Unable to extract document content")}}},475:function(e,t,r){var n=r(1);e=r(83);var a=r(48);r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(n.c)(t,e),t.prototype.testSelection=function(e,t,r){return a.a.pl(e,t,r)},t}(e.a),t.a=r}}])}).call(this||window);