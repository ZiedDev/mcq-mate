!function(t){t.createPromiseCapability=function(){var t={},n=new j((function(n,e){t.resolve=n,t.reject=e}));return t.promise=n,t};var n=t.Promise,e=n&&"resolve"in n&&"reject"in n&&"all"in n&&"race"in n&&function(){var t;return new n((function(n){t=n})),"function"==typeof t}();"undefined"!=typeof exports&&exports?(exports.Promise=e?n:j,exports.Polyfill=j):"function"==typeof define&&define.amd?define((function(){return e?n:j})):e||(t.Promise=j);var o="pending",r="sealed",i="fulfilled",f="rejected",c=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var a,s="undefined"!=typeof setImmediate?setImmediate:setTimeout,h=[];function l(){for(var t=0;t<h.length;t++)h[t][0](h[t][1]);h=[],a=!1}function p(t,n){h.push([t,n]),a||(a=!0,s(l,0))}function d(t){var n=t.owner,e=n.state_,o=n.data_,r=t[e],c=t.then;if("function"==typeof r){e=i;try{o=r(o)}catch(t){v(c,t)}}y(c,o)||(e===i&&w(c,o),e===f&&v(c,o))}function y(t,n){var e;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var o=n.then;if("function"==typeof o)return o.call(n,(function(o){e||(e=!0,n!==o?w(t,o):m(t,o))}),(function(n){e||(e=!0,v(t,n))})),!0}}catch(n){return e||v(t,n),!0}return!1}function w(t,n){t!==n&&y(t,n)||m(t,n)}function m(t,n){t.state_===o&&(t.state_=r,t.data_=n,p(P,t))}function v(t,n){t.state_===o&&(t.state_=r,t.data_=n,p(b,t))}function _(t){var n=t.then_;t.then_=void 0;for(var e=0;e<n.length;e++)d(n[e])}function P(t){t.state_=i,_(t)}function b(t){t.state_=f,_(t)}function j(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof j==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,n){function e(t){v(n,t)}try{t((function(t){w(n,t)}),e)}catch(t){e(t)}}(t,this)}j.prototype={constructor:j,state_:o,then_:null,data_:void 0,then:function(t,n){var e={owner:this,then:new this.constructor(c),fulfilled:t,rejected:n};return this.state_===i||this.state_===f?p(d,e):this.then_.push(e),e.then},catch:function(t){return this.then(null,t)}},j.all=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(n,e){var o=[],r=0;function i(t){return r++,function(e){o[t]=e,--r||n(o)}}for(var f,c=0;c<t.length;c++)(f=t[c])&&"function"==typeof f.then?f.then(i(c),e):o[c]=f;r||n(o)}))},j.race=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(n,e){for(var o,r=0;r<t.length;r++)(o=t[r])&&"function"==typeof o.then?o.then(n,e):n(o)}))},j.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(n){n(t)}))},j.reject=function(t){return new this((function(n,e){e(t)}))},e||(t.Promise=j)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);